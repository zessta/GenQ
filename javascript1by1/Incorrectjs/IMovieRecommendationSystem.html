<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Recommendation System</title>
</head>
<body>
    <h1>Movie Recommendation System</h1>
    <div id="movie-list"></div>
    <div id="recommended-movies"></div>

    <script>
        // Function to fetch movies from the API
        async function fetchMovies() {
            const response = await fetch('https://api.themoviedb.org/3/movie/popular?api_key=YOUR_API_KEY');
            const data = await response.json();
            return data.results;
        }

        // Function to rate a movie
        function rateMovie(movieId, rating) {
            // Assuming we have a global userRatings object to store user ratings
            userRatings[movieId] = rating;
        }

        // Function to recommend movies based on user ratings
        async function recommendMovies() {
            const movies = await fetchMovies();
            let recommended = movies.filter(movie => userRatings[movie.id] >= 4); // Mistake: rating filter logic is too simple
            displayMovies(recommended, 'recommended-movies');
        }

        // Function to display movies
        function displayMovies(movies, elementId) {
            const movieList = document.getElementById(elementId);
            movieList.innerHTML = ''; // Mistake: Not checking if element exists

            movies.forEach(movie => {
                const movieElement = document.createElement('div');
                movieElement.innerHTML = `
                    <h3>${movie.title}</h3>
                    <p>${movie.overview}</p>
                    <button onclick="rateMovie(${movie.id}, 5)">Rate 5</button>
                    <button onclick="rateMovie(${movie.id}, 4)">Rate 4</button>
                    <button onclick="rateMovie(${movie.id}, 3)">Rate 3</button>
                    <button onclick="rateMovie(${movie.id}, 2)">Rate 2</button>
                    <button onclick="rateMovie(${movie.id}, 1)">Rate 1</button>
                `;
                movieList.appendChild(movieElement);
            });
        }

        // Fetch and display popular movies on page load
        async function init() {
            const movies = await fetchMovies();
            displayMovies(movies, 'movie-list');
        }

        // Global user ratings object
        const userRatings = {};

        // Initialize the application
        init();
    </script>
</body>
</html>
